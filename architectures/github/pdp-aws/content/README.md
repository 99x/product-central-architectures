## PDP on AWS with Terraform

This document outlines deploying a Product Central instance using Terraform scripts on AWS infrastructure. 

**Services Used:**

The specific AWS services used will depend on the chosen deployment configuration in the Terraform scripts.

* Amazon ECS Fargate - To host and run container applicataion.
* Amazon RDS - Creates Aurora PostgreSQL cluster.
* Amazon VPC - To create a virtual private cloud for secure network isolation.
* Amazon IAM -  To manage user access and permissions.
* AWS SSM Parameter Store - To store secrets and environments.
* Amazon CloudFront - For content delivery network (CDN) functionalities.


**Important Note:**
* Once deployment is complete, access the associated Github Oauth Application  and configure settings like:
    * **Homepage URL:** Update the homepage URL to point to the public DNS name of the deployed application.
    * **Auth Callback URL:** Configure the Auth Callback URL to match the endpoint generated by your AWS deployment for authentication redirects.
        - `<DNS>/api/auth/github/handler/frame`


## Running Terraform Script Locally

**Prerequisites**

1. Install Terraform: Terraform is used to automate the creation and management of infrastructure. You can download it from the official website and follow the instructions for your operating system.
2. Install jq: jq is a lightweight and flexible command-line JSON processor. It's used in this project to parse JSON data. You can download it from the official website and follow the instructions for your operating system.

**Steps**

1. Create env.json file: Create a new file named env.json in the root of the project. This file should contain all the environment variables needed for the script. You can use the `env-example.json` file as a template. Make sure to replace the placeholder values with your actual data.

2. Run the script: You can now run the apply.sh script to create the infrastructure:

```sh
./apply.sh "$(cat env.json)"
```

This command reads the contents of the env.json file and passes it as an argument to the apply.sh script. The script then parses the JSON data and uses it to set the environment variables.

3. Destroy the infrastructure: Once you're done testing, you can destroy the infrastructure to avoid unnecessary charges:
This command works the same way as the apply.sh script, but it destroys the infrastructure instead of creating it.

```sh
./destroy.sh "$(cat env.json)"
```